# 簡易ルール分析レポート

## 分析概要
- **分析日時**: 2025年08月27日 09:45:20
- **データファイル**: 前処理済みデータ
- **サンプル数**: 21件
- **特徴量数**: 4個
- **目的変数**: 利用意向
- **最小サンプル数**: 3件

## 分析手法
READMEに記載されている簡易ルール分析（1本のif-else）を実装しました。

**目的**: 説明しやすい1行ルールを作る
```
if (特徴量1 > t1) AND (特徴量2 > t2) then 利用意向=あり else なし
```

**やり方**:
1. しきい値候補を決める（各指標の分位点や中間値）
2. すべての組合せ (t1, t2) を試し、**精度（または F1）**が最大の組を選ぶ
3. 該当人数が少なすぎるルールは除外（例：該当者 ≥ 3）

## 使用した特徴量


### 1. 支出変動率
- **重要度スコア**: 0.555
- **AUC**: 0.722
- **相関係数**: 0.389
- **解釈**: 中程度の高いほど利用意向あり (0.39)

### 2. 最高支出
- **重要度スコア**: 0.548
- **AUC**: 0.708
- **相関係数**: 0.388
- **解釈**: 中程度の高いほど利用意向あり (0.39)

### 3. 収入変動率
- **重要度スコア**: 0.350
- **AUC**: 0.593
- **相関係数**: 0.108
- **解釈**: 弱い利用意向との関連性は弱い (0.11)

### 4. 収入変動額
- **重要度スコア**: 0.334
- **AUC**: 0.583
- **相関係数**: 0.085
- **解釈**: 弱い利用意向との関連性は弱い (0.09)

## 発見されたルール

### 上位5個のルール


#### 1. 最高支出 > 250000.000 AND 収入変動率 > 0.157
- **F1スコア**: 0.667
- **ルール内利用意向率**: 58.3% (12件)
- **ルール外利用意向率**: 22.2% (9件)
- **精度**: 0.667
- **Lift**: 1.361

#### 2. 最高支出 > 380000.000 AND 収入変動率 > 0.157
- **F1スコア**: 0.667
- **ルール内利用意向率**: 66.7% (9件)
- **ルール外利用意向率**: 25.0% (12件)
- **精度**: 0.714
- **Lift**: 1.556

#### 3. 最高支出 > 396190.476 AND 収入変動率 > 0.157
- **F1スコア**: 0.667
- **ルール内利用意向率**: 66.7% (9件)
- **ルール外利用意向率**: 25.0% (12件)
- **精度**: 0.714
- **Lift**: 1.556

#### 4. 最高支出 > 250000.000 AND 収入変動額 > 140000.000
- **F1スコア**: 0.667
- **ルール内利用意向率**: 58.3% (12件)
- **ルール外利用意向率**: 22.2% (9件)
- **精度**: 0.667
- **Lift**: 1.361

#### 5. 最高支出 > 380000.000 AND 収入変動額 > 140000.000
- **F1スコア**: 0.667
- **ルール内利用意向率**: 66.7% (9件)
- **ルール外利用意向率**: 25.0% (12件)
- **精度**: 0.714
- **Lift**: 1.556


## 最良ルール詳細

### 最終ルール
**最高支出 > 250000.000 AND 収入変動率 > 0.157**

### 性能指標

**ルール内の利用意向率** = 58.3% (12件)

**それ以外の利用意向率** = 22.2% (9件)

**全体利用意向率** = 42.9%

**全体精度** = 0.667

**F1スコア** = 0.667

**Lift** = 1.361 (ルール内意向率 ÷ 全体意向率)

## ルールの解釈

このルールは、特定の条件を満たす顧客グループで利用意向が高くなることを示しています。

- **条件**: 最高支出 > 250000.000 AND 収入変動率 > 0.157
- **効果**: ルール内の利用意向率は、全体の1.4倍
- **信頼性**: F1スコア0.667で、精度0.667

## 統計的検証

### サンプル数の妥当性
- **ルール内サンプル数**: 12件
- **ルール外サンプル数**: 9件
- **最小サンプル数要件**: 3件以上 ✅

### 性能指標
- **精度**: 0.667
- **再現率**: 0.778
- **F1スコア**: 0.667
- **Lift**: 1.361

## 注意事項

**小標本のため参考値**。簡単な再チェック（LOOCV やブートストラップ）を実施することを推奨します。

## 今後の改善点

1. **交差検証**: LOOCVによるルールの安定性確認
2. **ブートストラップ**: 信頼区間の計算
3. **特徴量選択**: より効果的な特徴量の組み合わせの探索
4. **しきい値最適化**: より細かいしきい値の調整
