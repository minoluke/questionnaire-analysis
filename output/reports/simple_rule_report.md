# 簡易ルール分析レポート

## 分析概要
- **分析日時**: 2025年08月25日 12:51:25
- **データファイル**: 前処理済みデータ
- **サンプル数**: 17件
- **特徴量数**: 4個
- **目的変数**: 利用意向
- **最小サンプル数**: 3件

## 分析手法
READMEに記載されている簡易ルール分析（1本のif-else）を実装しました。

**目的**: 説明しやすい1行ルールを作る
```
if (特徴量1 > t1) AND (特徴量2 > t2) then 利用意向=あり else なし
```

**やり方**:
1. しきい値候補を決める（各指標の分位点や中間値）
2. すべての組合せ (t1, t2) を試し、**精度（または F1）**が最大の組を選ぶ
3. 該当人数が少なすぎるルールは除外（例：該当者 ≥ 3）

## 使用した特徴量


### 1. 支出変動率
- **重要度スコア**: 0.699
- **AUC**: 0.829
- **相関係数**: 0.570
- **解釈**: 強い高いほど利用意向あり (0.57)

### 2. 最高支出
- **重要度スコア**: 0.542
- **AUC**: 0.686
- **相関係数**: 0.398
- **解釈**: 中程度の高いほど利用意向あり (0.40)

### 3. 収入変動額
- **重要度スコア**: 0.518
- **AUC**: 0.729
- **相関係数**: 0.307
- **解釈**: 中程度の高いほど利用意向あり (0.31)

### 4. 最高月収
- **重要度スコア**: 0.518
- **AUC**: 0.679
- **相関係数**: 0.356
- **解釈**: 中程度の高いほど利用意向あり (0.36)

## 発見されたルール

### 上位5個のルール


#### 1. 支出変動率 > 0.400 AND 収入変動額 > 9.000
- **F1スコア**: 0.824
- **ルール内利用意向率**: 70.0% (10件)
- **ルール外利用意向率**: 0.0% (7件)
- **精度**: 0.824
- **Lift**: 1.700

#### 2. 支出変動率 > 0.400 AND 最高月収 > 35.000
- **F1スコア**: 0.750
- **ルール内利用意向率**: 66.7% (9件)
- **ルール外利用意向率**: 12.5% (8件)
- **精度**: 0.765
- **Lift**: 1.619

#### 3. 最高支出 > 72.059 AND 収入変動額 > 9.000
- **F1スコア**: 0.727
- **ルール内利用意向率**: 100.0% (4件)
- **ルール外利用意向率**: 23.1% (13件)
- **精度**: 0.824
- **Lift**: 2.429

#### 4. 最高支出 > 72.059 AND 最高月収 > 35.000
- **F1スコア**: 0.727
- **ルール内利用意向率**: 100.0% (4件)
- **ルール外利用意向率**: 23.1% (13件)
- **精度**: 0.824
- **Lift**: 2.429

#### 5. 支出変動率 > 0.941 AND 収入変動額 > 9.000
- **F1スコア**: 0.714
- **ルール内利用意向率**: 71.4% (7件)
- **ルール外利用意向率**: 20.0% (10件)
- **精度**: 0.765
- **Lift**: 1.735


## 最良ルール詳細

### 最終ルール
**支出変動率 > 0.400 AND 収入変動額 > 9.000**

### 性能指標

**ルール内の利用意向率** = 70.0% (10件)

**それ以外の利用意向率** = 0.0% (7件)

**全体利用意向率** = 41.2%

**全体精度** = 0.824

**F1スコア** = 0.824

**Lift** = 1.700 (ルール内意向率 ÷ 全体意向率)

## ルールの解釈

このルールは、特定の条件を満たす顧客グループで利用意向が高くなることを示しています。

- **条件**: 支出変動率 > 0.400 AND 収入変動額 > 9.000
- **効果**: ルール内の利用意向率は、全体の1.7倍
- **信頼性**: F1スコア0.824で、精度0.824

## 統計的検証

### サンプル数の妥当性
- **ルール内サンプル数**: 10件
- **ルール外サンプル数**: 7件
- **最小サンプル数要件**: 3件以上 ✅

### 性能指標
- **精度**: 0.824
- **再現率**: 1.000
- **F1スコア**: 0.824
- **Lift**: 1.700

## 注意事項

**小標本のため参考値**。簡単な再チェック（LOOCV やブートストラップ）を実施することを推奨します。

## 今後の改善点

1. **交差検証**: LOOCVによるルールの安定性確認
2. **ブートストラップ**: 信頼区間の計算
3. **特徴量選択**: より効果的な特徴量の組み合わせの探索
4. **しきい値最適化**: より細かいしきい値の調整
