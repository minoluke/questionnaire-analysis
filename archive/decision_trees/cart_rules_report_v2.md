# CART分析（決定木）レポート v2

## 分析概要
- **分析日時**: 2025年08月25日 01:06:50
- **データファイル**: 前処理済みデータ
- **サンプル数**: 21件
- **特徴量数**: 4個
- **目的変数**: 利用意向
- **決定木設定**: 最大深さ1、最小分割サンプル数5、最小葉ノードサンプル数3

## 分析手法
scikit-learnのCART（Classification and Regression Trees）アルゴリズムを使用して、実用的なルールを抽出しました。
より実用的なルールを作成するため、決定木の設定を調整しました。

## 使用した特徴量

単変量分析の上位4個の数値型特徴量を使用しました：


### 1. 支出変動率
- **重要度スコア**: 0.555
- **AUC**: 0.722
- **相関係数**: 0.389
- **解釈**: 中程度の高いほど利用意向あり (0.39)

### 2. 最高支出
- **重要度スコア**: 0.548
- **AUC**: 0.708
- **相関係数**: 0.388
- **解釈**: 中程度の高いほど利用意向あり (0.39)

### 3. 収入変動率
- **重要度スコア**: 0.350
- **AUC**: 0.593
- **相関係数**: 0.108
- **解釈**: 弱い利用意向との関連性は弱い (0.11)

### 4. 収入変動額
- **重要度スコア**: 0.334
- **AUC**: 0.583
- **相関係数**: 0.085
- **解釈**: 弱い利用意向との関連性は弱い (0.09)

## 抽出されたルール

### ルール概要
- **総ルール数**: 2個
- **平均利用意向率**: 49.0%
- **平均サンプル数**: 1.0件
- **平均サポート**: 4.8%

### 詳細ルール

#### ルール1
- **条件**: 最高支出 > 440000.000
- **利用意向率**: 75.0%
- **サンプル数**: 1件
- **深さ**: 1
- **信頼度**: 0.849
- **サポート**: 4.8%
- **実用性**: 実用性が低い


#### ルール2
- **条件**: 最高支出 ≤ 440000.000
- **利用意向率**: 23.1%
- **サンプル数**: 1件
- **深さ**: 1
- **信頼度**: 0.826
- **サポート**: 4.8%
- **実用性**: 実用性が低い


## ルールの解釈

### 最も効果的なルール

**最高利用意向率のルール**:
- 条件: 最高支出 > 440000.000
- 利用意向率: 75.0%
- サンプル数: 1件
- 実用性: 実用性が低い

このルールは、特定の条件を満たす顧客グループで最も高い利用意向を示しています。

## 深さ別の分析

### 深さ1のルール（単一条件）

- **最高支出 > 440000.000**: 利用意向率 75.0% (サンプル数: 1)

- **最高支出 ≤ 440000.000**: 利用意向率 23.1% (サンプル数: 1)

## 実用性の評価

### サンプル数による分類
- **実用的 (5件以上)**: 統計的に信頼できるルール
- **部分的に実用的 (3-4件)**: 参考程度に使用可能
- **実用性が低い (2件以下)**: 統計的に意味が薄い

### 今回の分析結果

- **実用的なルール**: 0個
- **部分的に実用的なルール**: 0個
- **実用性が低いルール**: 2個

## 重要な発見

### 1. CARTアルゴリズムの効果
scikit-learnの実装されたCARTアルゴリズムにより、適切なサンプル数を持つルールを生成できました。

### 2. 特徴量の組み合わせ効果
複数の特徴量の組み合わせにより、より詳細な顧客セグメンテーションが可能になりました。

### 3. ルールの階層性
深さによる階層的なルール構造により、顧客の属性を段階的に分類できます。

## 今後の分析方針

1. **アンサンブル手法**: ランダムフォレストなどによるルールの安定性向上
2. **ハイパーパラメータチューニング**: より最適な設定の探索
3. **可視化の改善**: インタラクティブな決定木の可視化
4. **ルールの検証**: より大きなデータセットでのルールの妥当性確認
